<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <artifactId>cmf-demo-dms</artifactId>
    <name>CROC Case Management Framework: Demo Document Management System</name>
    <packaging>war</packaging>

    <parent>
        <groupId>ru.croc.ctp.cmf</groupId>
        <artifactId>cmf-parent</artifactId>
        <version>1.9.1</version>
    </parent>

    <properties>
        <templates.output>${project.build.directory}/generated-resources-web</templates.output>
        <deployment.artifact.id>${project.artifactId}</deployment.artifact.id>

        <cmf.dms.classifier>prod</cmf.dms.classifier>
        <cmf.dms.npm.build.target>prod</cmf.dms.npm.build.target>
        <!--Задается в профилях aspose и jod -->
        <transformer.type>none</transformer.type>

        <jxfw.version>1.9.5</jxfw.version>

        <!-- Убираем плюрализм. На новые версии переходим сами. -->
        <ctp.version>${jxfw.version}</ctp.version>

        <!-- Версия клиентского расширения CMF. -->
        <cmf.clientext.version>1.0.0</cmf.clientext.version>

        <!-- При изменении версии Spring'а в jXFW следует проверить актуальность и обновить версию здесь. -->
        <!-- Переменная используется при сборке docker образов и не может быть вынянута из BOM. -->
        <h2.version>1.4.197</h2.version>

        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <java.version>1.8</java.version>

        <project.cmf.version>${project.version}</project.cmf.version>
        <cmf.build.resources.version>1.9.2-SNAPSHOT</cmf.build.resources.version>
        <project.cmf.aspose.license.version>${project.version}</project.cmf.aspose.license.version>
        <cmf.grunt.modify.sourcemap.version>1.0.0</cmf.grunt.modify.sourcemap.version>
        <cmf-general-types-ui.version>1.0.0</cmf-general-types-ui.version>
        <cmf.ui.module.name>cmf-ui</cmf.ui.module.name>
        <ctp.cmf.npm.scope.name>@ctp.cmf</ctp.cmf.npm.scope.name>
        <cmf.ui.module.scopedName>${ctp.cmf.npm.scope.name}/${cmf.ui.module.name}</cmf.ui.module.scopedName>
        <cmf.dms.core.ui.module.scopedName>${ctp.cmf.npm.scope.name}/${cmf.dms.core.ui.module.name}</cmf.dms.core.ui.module.scopedName>

        <xtend.version>2.19.0</xtend.version>

        <tomcat.version>8.5.2</tomcat.version>
        <mockito.version>2.15.0</mockito.version>

        <aspose.barcode.version>19.3</aspose.barcode.version>
        <aspose.cells.version>19.3</aspose.cells.version>
        <aspose.words.version>19.4</aspose.words.version>
        <aspose.pdf.version>19.3</aspose.pdf.version>

        <jodconverter.version>4.2.2</jodconverter.version>

        <libreoffice.version>5.3.7</libreoffice.version>

        <chemistry-opencmis-server-inmemory.version>1.1.0</chemistry-opencmis-server-inmemory.version>
        <chemistry-opencmis-server-fileshare.version>1.1.0</chemistry-opencmis-server-fileshare.version>

        <pdfbox.version>2.0.16</pdfbox.version> <!-- Связан с версией tika -->
        <solr.version>6.6.5</solr.version>
        <tika.version>1.20</tika.version>
        <poi.version>4.0.1</poi.version> <!-- Связан с версией tika -->
        <commons.compress.version>1.18</commons.compress.version> <!-- Связан с версией tika -->
        <spotbugs.version>3.1.12</spotbugs.version>
        <nuxeo.version>10.10</nuxeo.version>

        <djfarrelly.maildev.version>1.0.0</djfarrelly.maildev.version>
        <log4j.version>2.17.0</log4j.version>
        <logback.version>1.2.9</logback.version>

        <!-- WebClient -->
        <ui.webclient.version>1.39.4</ui.webclient.version>
        <ui.webclient.generator.version>1.39.0</ui.webclient.generator.version>

        <!-- UI Web библиотеки -->
        <ui.chartjs.types.version>2.7.52</ui.chartjs.types.version>
        <ui.chartjs.version>2.8.0</ui.chartjs.version>
        <ui.components-font-awesome.version>4.7.0</ui.components-font-awesome.version>
        <ui.draggable.version>1.0.0-beta.8</ui.draggable.version>
        <ui.intersection-observer.version>0.7.0</ui.intersection-observer.version>
        <ui.pdfjs-dist.types.version>0.1.2</ui.pdfjs-dist.types.version>
        <ui.pdfjs-dist.version>1.5.500</ui.pdfjs-dist.version>
        <ui.quill.version>1.3.6</ui.quill.version>
        <ui.bootstrap-year-calendar.version>1.1.1-c1</ui.bootstrap-year-calendar.version>
        <ui.fullcalendar.version>3.10.0</ui.fullcalendar.version>
        <ui.pdf-annotation-icons.version>1.0.1</ui.pdf-annotation-icons.version>

        <!-- Typescript -->
        <ui.typescript.version>3.4.5</ui.typescript.version>

        <!-- Grunt -->
        <ui.grunt.version>1.0.4</ui.grunt.version>
        <ui.grunt-contrib-clean.version>2.0.0</ui.grunt-contrib-clean.version>
        <ui.grunt-contrib-concat.version>1.0.1</ui.grunt-contrib-concat.version>
        <ui.grunt-contrib-connect.version>2.0.0</ui.grunt-contrib-connect.version>
        <ui.grunt-contrib-copy.version>1.0.0</ui.grunt-contrib-copy.version>
        <ui.grunt-contrib-less.version>2.0.0</ui.grunt-contrib-less.version>
        <ui.grunt-contrib-watch.version>1.1.0</ui.grunt-contrib-watch.version>
        <ui.grunt-run.version>0.8.1</ui.grunt-run.version>
        <ui.grunt-sync.version>0.8.0</ui.grunt-sync.version>
        <ui.grunt-ts.version>6.0.0-beta.22</ui.grunt-ts.version>
        <ui.grunt-replace.version>1.0.1</ui.grunt-replace.version>
        <ui.matchdep.version>2.0.0</ui.matchdep.version>

        <!-- Webpack -->
        <ui.amdi18n-loader.version>0.9.2</ui.amdi18n-loader.version>
        <ui.awesome-typescript-loader.version>5.2.1</ui.awesome-typescript-loader.version>
        <ui.css-loader.version>2.1.1</ui.css-loader.version>
        <ui.clean-webpack-plugin.version>2.0.1</ui.clean-webpack-plugin.version>
        <ui.exports-loader.version>0.7.0</ui.exports-loader.version>
        <ui.file-loader.version>3.0.1</ui.file-loader.version>
        <ui.filemanager-webpack-plugin.version>2.0.5</ui.filemanager-webpack-plugin.version>
        <ui.handlebars-loader.version>1.0.0</ui.handlebars-loader.version>
        <ui.html-loader.version>0.5.5</ui.html-loader.version>
        <ui.html-webpack-plugin.version>3.2.0</ui.html-webpack-plugin.version>
        <ui.imports-loader.version>0.8.0</ui.imports-loader.version>
        <ui.istanbul-loader.version>1.0.0-beta.2</ui.istanbul-loader.version>
        <ui.less-loader.version>5.0.0</ui.less-loader.version>
        <ui.mini-css-extract-plugin.version>0.6.0</ui.mini-css-extract-plugin.version>
        <ui.multi-loader.version>0.1.0</ui.multi-loader.version>
        <ui.optimize-css-assets-webpack-plugin.version>5.0.1</ui.optimize-css-assets-webpack-plugin.version>
        <ui.script-loader.version>0.7.2</ui.script-loader.version>
        <ui.style-loader.version>0.23.1</ui.style-loader.version>
        <ui.terser-webpack-plugin.version>1.2.4</ui.terser-webpack-plugin.version>
        <ui.ts-loader.version>6.0.1</ui.ts-loader.version>
        <ui.webpack.version>4.32.2</ui.webpack.version>
        <ui.webpack-cli.version>3.3.2</ui.webpack-cli.version>
        <ui.webpack-dev-server.version>3.4.1</ui.webpack-dev-server.version>
        <ui.webpack-hot-middleware.version>2.25.0</ui.webpack-hot-middleware.version>
        <ui.webpack-log.version>2.0.0</ui.webpack-log.version>
        <ui.webpack-merge.version>4.2.1</ui.webpack-merge.version>
        <ui.types-node.version>11.10.4</ui.types-node.version>

        <!-- Остальные UI библиотеки и утилиты -->
        <ui.chromedriver.version>74.0.0</ui.chromedriver.version>
        <ui.handlebars.version>4.1.2</ui.handlebars.version>
        <ui.intern.version>4.5.0</ui.intern.version>
        <ui.jquery-mockjax.types.version>2.3.0</ui.jquery-mockjax.types.version>
        <ui.jquery-mockjax.version>2.5.0</ui.jquery-mockjax.version>
        <ui.less.version>3.9.0</ui.less.version>
        <ui.linklocal.version>2.8.2</ui.linklocal.version>
        <ui.npm-run-all.version>4.1.5</ui.npm-run-all.version>
        <ui.puppeteer.version>1.15.0</ui.puppeteer.version>
        <ui.shx.version>0.3.2</ui.shx.version>
        <ui.sinon.types.version>7.0.11</ui.sinon.types.version>
        <ui.mime.types.version>1.3.2</ui.mime.types.version>
        <ui.sinon.version>7.3.2</ui.sinon.version>
        <ui.source-map.types.version>0.5.2</ui.source-map.types.version>
        <ui.yoman.version>2.0.6</ui.yoman.version>
        <!-- - - -->

        <!-- Фиксация UI типов и библиотек, которые напрямую не используются. -->
        <ui.fixed.babel-types.version>7.0.10</ui.fixed.babel-types.version>
        <ui.express.types.version>4.17.13</ui.express.types.version>
        <ui.express-serve-static-core.types.version>4.17.26</ui.express-serve-static-core.types.version>
        <ui.fixed.jquery-mousewheel-types.version>3.1.8</ui.fixed.jquery-mousewheel-types.version>
        <ui.fixed.node-types.version>12.0.8</ui.fixed.node-types.version>
        <!-- - - -->

        <nodejs.version><![CDATA[>=8.16.0]]></nodejs.version>
        <node.version>v8.17.0</node.version>
        <npm.version>6.14.14</npm.version>

        <!-- +Старые переменные -->
        <typescript.version>${ui.typescript.version}</typescript.version>
        <webclient.version>${ui.webclient.version}</webclient.version>
        <webclient.generator.version>${ui.webclient.generator.version}</webclient.generator.version>
        <!-- -Старые переменные -->

        <deployment.npm.artifactory.url>https://repo.croc.ru/artifactory/api/npm/ctp.cmf.npm.local/
        </deployment.npm.artifactory.url>
        <npm.install.args>--prefer-offline</npm.install.args>

        <test.args>-Dfile.encoding=UTF-8 -Xmx1024m</test.args>

        <maven.javadoc.skip>true</maven.javadoc.skip>
        <maven.sources.skip>true</maven.sources.skip>
    </properties>

    <dependencies>
        <!-- Здесь объявляем для того, чтобы артефакт собирался после заданного -->
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-ui</artifactId>
            <version>${project.version}</version>
            <type>pom</type>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-content-removal-sync</artifactId>
            <version>${project.version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-dms-appicon-ui</artifactId>
            <version>${project.version}</version>
            <type>pom</type>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-dms-bookmarks-ui</artifactId>
            <version>${project.version}</version>
            <type>pom</type>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-dms-info-ui</artifactId>
            <version>${project.version}</version>
            <type>pom</type>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-dms-dictionary-model-extension-ui</artifactId>
            <version>${project.version}</version>
            <type>pom</type>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-dms-dictionary-common-ui</artifactId>
            <version>${project.version}</version>
            <type>pom</type>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-dms-dictionary-security-ui</artifactId>
            <version>${project.version}</version>
            <type>pom</type>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-dms-dictionary-user-ui</artifactId>
            <type>pom</type>
            <version>${project.version}</version>
            <scope>compile</scope>
            <optional>true</optional>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-dms-dictionary-employee-ui</artifactId>
            <type>pom</type>
            <version>${project.version}</version>
            <scope>compile</scope>
            <optional>true</optional>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-dms-dictionary-position-description-ui</artifactId>
            <type>pom</type>
            <version>${project.version}</version>
            <scope>compile</scope>
            <optional>true</optional>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-dms-dictionary-role-ui</artifactId>
            <type>pom</type>
            <version>${project.version}</version>
            <scope>compile</scope>
            <optional>true</optional>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-dms-dictionary-orgstructure-ui</artifactId>
            <type>pom</type>
            <version>${project.version}</version>
            <scope>compile</scope>
            <optional>true</optional>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-dms-security-ui</artifactId>
            <type>pom</type>
            <version>${project.version}</version>
            <scope>compile</scope>
            <optional>true</optional>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-dms-task-ui</artifactId>
            <type>pom</type>
            <version>${project.version}</version>
            <scope>compile</scope>
            <optional>true</optional>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-dms-mainpage-ui</artifactId>
            <type>pom</type>
            <version>${project.version}</version>
            <scope>compile</scope>
            <optional>true</optional>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-dms-document-regnumber-ui</artifactId>
            <type>pom</type>
            <version>${project.version}</version>
            <scope>compile</scope>
            <optional>true</optional>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-dms-report-ui</artifactId>
            <type>pom</type>
            <version>${project.version}</version>
            <scope>compile</scope>
            <optional>true</optional>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-dms-comment-ui</artifactId>
            <type>pom</type>
            <version>${project.version}</version>
            <scope>compile</scope>
            <optional>true</optional>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-dms-document-ui</artifactId>
            <type>pom</type>
            <version>${project.version}</version>
            <scope>compile</scope>
            <optional>true</optional>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-dms-document-approval-ui</artifactId>
            <type>pom</type>
            <version>${project.version}</version>
            <scope>compile</scope>
            <optional>true</optional>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-dms-document-process-ui</artifactId>
            <type>pom</type>
            <version>${project.version}</version>
            <scope>compile</scope>
            <optional>true</optional>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-dms-commission-ui</artifactId>
            <type>pom</type>
            <version>${project.version}</version>
            <scope>compile</scope>
            <optional>true</optional>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-dms-theme-ui</artifactId>
            <type>pom</type>
            <version>${project.version}</version>
            <scope>compile</scope>
            <optional>true</optional>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-dms-search-ui</artifactId>
            <type>pom</type>
            <version>${project.version}</version>
            <scope>compile</scope>
            <optional>true</optional>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-dms-common-ui</artifactId>
            <type>pom</type>
            <version>${project.version}</version>
            <scope>compile</scope>
            <optional>true</optional>
        </dependency>

        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-transform-starter</artifactId>
            <version>${project.version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-regnumber-starter</artifactId>
            <version>${project.version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-regnumber-counter</artifactId>
            <version>${project.version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-content-cmis</artifactId>
            <version>${project.version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-content-file</artifactId>
            <version>${project.version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-content-starter</artifactId>
            <version>${project.version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-validation-starter</artifactId>
            <version>${project.version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-validation-task</artifactId>
            <version>${project.version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-tempstore-starter</artifactId>
            <version>${project.version}</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-workingtime-starter</artifactId>
            <version>${project.version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-task-starter</artifactId>
            <version>${project.version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-dashboard-starter</artifactId>
            <version>${project.version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-security-starter</artifactId>
            <version>${project.version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-process</artifactId>
            <version>${project.version}</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-process-starter</artifactId>
            <version>${project.version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-workingtime-wc</artifactId>
            <version>${project.version}</version>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-clientext-starter</artifactId>
            <version>${project.version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-lock</artifactId>
            <version>${project.version}</version>
            <scope>compile</scope>
        </dependency>

        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-dms-dictionary-orgstructure</artifactId>
            <version>${project.version}</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-dms-dictionary-security</artifactId>
            <version>${project.version}</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-dms-audit</artifactId>
            <version>${project.version}</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-dms-security</artifactId>
            <version>${project.version}</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-dms-client-web</artifactId>
            <version>${project.version}</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-dms-mail</artifactId>
            <version>${project.version}</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-dms-rendition</artifactId>
            <version>${project.version}</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-rendition-starter</artifactId>
            <version>${project.version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-dms-comment</artifactId>
            <version>${project.version}</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-dms-bookmarks</artifactId>
            <version>${project.version}</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-dms-journal</artifactId>
            <version>${project.version}</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-dms-dashboard</artifactId>
            <version>${project.version}</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-dms-lock</artifactId>
            <version>${project.version}</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-dms-content</artifactId>
            <version>${project.version}</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-dms-document-core</artifactId>
            <version>${project.version}</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-dms-document-approval</artifactId>
            <version>${project.version}</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-dms-document-approval-mail</artifactId>
            <version>${project.version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-dms-document-regnumber</artifactId>
            <version>${project.version}</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-dms-document-process</artifactId>
            <version>${project.version}</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-dms-document-search</artifactId>
            <version>${project.version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-dms-process</artifactId>
            <version>${project.version}</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-dms-task</artifactId>
            <version>${project.version}</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-dms-task-mail</artifactId>
            <version>${project.version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-dms-commission</artifactId>
            <version>${project.version}</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-dms-commission-search</artifactId>
            <version>${project.version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-dms-search</artifactId>
            <version>${project.version}</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-dms-report</artifactId>
            <version>${project.version}</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-dms-data</artifactId>
            <version>${project.version}</version>
            <scope>runtime</scope>
        </dependency>

        <!-- Не ясно, почему без этого не берёт модель. -->
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-dashboard</artifactId>
            <version>${project.version}</version>
            <scope>compile</scope>
            <optional>true</optional>
        </dependency>


        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-data-jpa</artifactId>
        </dependency>
        <dependency>
            <groupId>com.h2database</groupId>
            <artifactId>h2</artifactId>
            <scope>runtime</scope>
            <optional>true</optional>
        </dependency>
        <dependency>
            <groupId>org.postgresql</groupId>
            <artifactId>postgresql</artifactId>
            <scope>runtime</scope>
            <optional>true</optional>
        </dependency>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-tomcat</artifactId>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-web</artifactId>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-thymeleaf</artifactId>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-integration</artifactId>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-batch</artifactId>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-web</artifactId>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-config</artifactId>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-configuration-processor</artifactId>
            <scope>compile</scope>
            <optional>true</optional>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-websocket</artifactId>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-websocket</artifactId>
            <scope>runtime</scope>
        </dependency>

        <dependency>
            <groupId>ru.croc.ctp</groupId>
            <artifactId>jxfw-wc-loader</artifactId>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp</groupId>
            <artifactId>jxfw-jpa-compile</artifactId>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>ru.croc.ctp</groupId>
            <artifactId>jxfw-security</artifactId>
            <scope>compile</scope>
        </dependency>

        <dependency>
            <groupId>org.flywaydb</groupId>
            <artifactId>flyway-core</artifactId>
            <scope>compile</scope>
        </dependency>

        <!-- Аннотации JSR305 -->
        <dependency>
            <groupId>ru.croc.ctp.cmf</groupId>
            <artifactId>cmf-jsr305</artifactId>
            <version>${project.version}</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>com.github.spotbugs</groupId>
            <artifactId>spotbugs-annotations</artifactId>
        </dependency>

        <dependency>
            <groupId>ru.paratype</groupId>
            <artifactId>pt-sans</artifactId>
            <scope>runtime</scope>
        </dependency>

        <dependency>
            <groupId>ru.croc.ctp</groupId>
            <artifactId>jxfw-reporting-birt</artifactId>
            <scope>compile</scope>
        </dependency>

        <dependency>
            <groupId>com.innoventsolutions</groupId>
            <artifactId>birt.controls.lib</artifactId>
            <scope>runtime</scope>
        </dependency>

    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.springframework.boot</groupId>
                <artifactId>spring-boot-maven-plugin</artifactId>
                <executions>
                    <execution>
                        <goals>
                            <goal>repackage</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <classifier>${cmf.dms.classifier}-${transformer.type}</classifier>
                    <jvmArguments>
                        -agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=5005
                    </jvmArguments>
                    <mainClass>ru.croc.ctp.cmf.demodms.Application</mainClass>
                    <excludes>
                        <exclude>
                            <groupId>ru.croc.ctp</groupId>
                            <artifactId>cass-jpa-compile</artifactId>
                        </exclude>
                        <exclude>
                            <groupId>ru.croc.ctp</groupId>
                            <artifactId>jxfw-solr-compile</artifactId>
                        </exclude>
                    </excludes>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.eclipse.xtend</groupId>
                <artifactId>xtend-maven-plugin</artifactId>
            </plugin>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>exec-maven-plugin</artifactId>
                <executions>
                    <execution>
                        <id>install npm dependencies</id>
                        <phase>compile</phase>
                        <goals>
                            <goal>exec</goal>
                        </goals>
                        <configuration>
                            <executable>npm</executable>
                            <commandlineArgs>install ${npm.install.args}</commandlineArgs>
                            <workingDirectory>wc</workingDirectory>
                        </configuration>
                    </execution>
                    <execution>
                        <id>build js</id>
                        <phase>prepare-package</phase>
                        <goals>
                            <goal>exec</goal>
                        </goals>
                        <configuration>
                            <executable>npm</executable>
                            <commandlineArgs>run ${cmf.dms.npm.build.target}</commandlineArgs>
                            <workingDirectory>wc</workingDirectory>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>ru.croc.ctp</groupId>
                <artifactId>modelgen-maven-plugin</artifactId>
            </plugin>
            <plugin>
                <groupId>ru.croc.ctp</groupId>
                <artifactId>wcgen-maven-plugin</artifactId>
                <executions>
                    <execution>
                        <id>jsModel</id>
                        <goals>
                            <goal>jsModel</goal>
                        </goals>
                        <configuration>
                            <jsModelMetaFileName>metadata.js</jsModelMetaFileName>
                        </configuration>
                    </execution>
                    <execution>
                        <id>generateFacade</id>
                        <configuration>
                            <excludeRegexps>ru.croc.ctp.cmf.content.*</excludeRegexps>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>com.mysema.maven</groupId>
                <artifactId>apt-maven-plugin</artifactId>
            </plugin>

            <plugin>
                <artifactId>maven-war-plugin</artifactId>
                <configuration>
                    <failOnMissingWebXml>false</failOnMissingWebXml>
                    <attachClasses>true</attachClasses>
                    <primaryArtifact>false</primaryArtifact>
                </configuration>
            </plugin>

            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>build-helper-maven-plugin</artifactId>
                <executions>
                    <execution>
                        <id>timestamp-property</id>
                        <goals>
                            <goal>timestamp-property</goal>
                        </goals>
                        <configuration>
                            <name>deployment.build.timestamp</name>
                            <pattern>yyyyMMdd'T'HHmmss</pattern>
                            <timeZone>GMT</timeZone>
                            <locale>en_US</locale>
                        </configuration>
                    </execution>
                    <execution>
                        <id>create-deployment.artifact.version</id>
                        <goals>
                            <goal>regex-property</goal>
                        </goals>
                        <configuration>
                            <name>deployment.artifact.version</name>
                            <value>${project.version}</value>
                            <regex>-SNAPSHOT</regex>
                            <replacement>-SNAPSHOT-${deployment.build.timestamp}</replacement>
                            <failIfNoMatch>false</failIfNoMatch>
                        </configuration>
                    </execution>
                    <execution>
                        <id>create-dependency.artifact.version</id>
                        <goals>
                            <goal>regex-property</goal>
                        </goals>
                        <configuration>
                            <name>dependency.artifact.version</name>
                            <value>${project.version}</value>
                            <regex>.*-SNAPSHOT</regex>
                            <replacement>~${project.version}</replacement>
                            <failIfNoMatch>false</failIfNoMatch>
                        </configuration>
                    </execution>
                </executions>
            </plugin>

            <plugin>
                <artifactId>maven-resources-plugin</artifactId>
                <executions>
                    <execution>
                        <!-- Формируем package.json на основе шаблона. -->
                        <id>resolve_templates</id>
                        <phase>generate-resources</phase>
                        <goals>
                            <goal>copy-resources</goal>
                        </goals>
                        <configuration>
                            <resources>
                                <resource>
                                    <directory>wc/buildresources/templates</directory>
                                    <includes>
                                        <include>package.json.template</include>
                                    </includes>
                                    <filtering>true</filtering>
                                </resource>
                            </resources>
                            <outputDirectory>${templates.output}</outputDirectory>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <artifactId>maven-antrun-plugin</artifactId>
                <executions>
                    <execution>
                        <!-- Копируем сформированный package.json в проект. -->
                        <id>copy_resolved_templates</id>
                        <phase>generate-resources</phase>
                        <goals>
                            <goal>run</goal>
                        </goals>
                        <configuration>
                            <target name="update resolved templates">
                                <copy file="${templates.output}/package.json.template" tofile="${project.basedir}/wc/package.json" overwrite="true" />
                            </target>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-dependency-plugin</artifactId>
                <executions>
                    <execution>
                        <id>copy</id>
                        <phase>prepare-package</phase>
                        <goals>
                            <goal>copy</goal>
                        </goals>
                        <configuration>
                            <artifactItems>
                                <artifactItem>
                                    <groupId>ru.croc.ctp.cmf</groupId>
                                    <artifactId>cmf-client-ext</artifactId>
                                    <version>${cmf.clientext.version}</version>
                                    <type>exe</type>
                                    <classifier>windows-setup</classifier>
                                    <overWrite>true</overWrite>
                                    <outputDirectory>${project.build.directory}/classes/static/cmfClientExt</outputDirectory>
                                    <destFileName>cmf-client-ext-setup.exe</destFileName>
                                </artifactItem>
                                <artifactItem>
                                    <groupId>ru.croc.ctp.cmf</groupId>
                                    <artifactId>cmf-client-ext-xp</artifactId>
                                    <version>${cmf.clientext.version}</version>
                                    <type>exe</type>
                                    <classifier>windows-setup</classifier>
                                    <overWrite>true</overWrite>
                                    <outputDirectory>${project.build.directory}/classes/static/cmfClientExt</outputDirectory>
                                    <destFileName>cmf-client-ext-setup-xp.exe</destFileName>
                                </artifactItem>
                            </artifactItems>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>

    <profiles>
        <profile>
            <!--Repackage with Aspose -->
            <id>aspose</id>
            <activation>
                <property>
                    <name>!jod</name>
                </property>
            </activation>
            <properties>
                <transformer.type>aspose</transformer.type>
            </properties>
            <dependencies>
                <dependency>
                    <groupId>ru.croc.ctp.cmf</groupId>
                    <artifactId>cmf-transform-worker-aspose</artifactId>
                    <version>${project.version}</version>
                    <scope>runtime</scope>
                </dependency>
                <dependency>
                    <groupId>ru.croc.ctp.cmf</groupId>
                    <artifactId>cmf-aspose-starter</artifactId>
                    <version>${project.version}</version>
                    <scope>runtime</scope>
                </dependency>
                <dependency>
                    <groupId>ru.croc.ctp.cmf</groupId>
                    <artifactId>cmf-aspose-license-croc</artifactId>
                    <version>${project.version}</version>
                    <scope>runtime</scope>
                </dependency>
            </dependencies>
        </profile>

        <profile>
            <!--Repackage with JodConverter -->
            <id>jod</id>
            <activation>
                <property>
                    <name>jod</name>
                </property>
            </activation>
            <properties>
                <transformer.type>jod</transformer.type>
            </properties>
            <dependencies>
                <dependency>
                    <groupId>ru.croc.ctp.cmf</groupId>
                    <artifactId>cmf-transform-worker-jod</artifactId>
                    <version>${project.version}</version>
                    <scope>runtime</scope>
                </dependency>
                <dependency>
                    <groupId>ru.croc.ctp.cmf</groupId>
                    <artifactId>cmf-transform-worker-pdfbox</artifactId>
                    <version>${project.version}</version>
                    <scope>runtime</scope>
                </dependency>
            </dependencies>
        </profile>

        <profile>
            <id>sources</id>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-source-plugin</artifactId>
                        <inherited>true</inherited>
                    </plugin>
                </plugins>
            </build>
        </profile>

        <!-- Только для конфигурации Eclipse -->
        <profile>
            <id>eclipse</id>
            <activation>
                <property>
                    <name>m2e.version</name>
                </property>
            </activation>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.codehaus.mojo</groupId>
                        <artifactId>build-helper-maven-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>add-source</id>
                                <phase>generate-sources</phase>
                                <goals>
                                    <goal>add-source</goal>
                                </goals>
                                <configuration>
                                    <sources>
                                        <source>${project.build.directory}/generated-sources/wcgen/</source>
                                    </sources>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>

                    <plugin>
                        <groupId>org.codehaus.mojo</groupId>
                        <artifactId>exec-maven-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>install npm dependencies</id>
                                <phase>none</phase>
                                <configuration>
                                    <skip>true</skip>
                                </configuration>
                            </execution>
                            <execution>
                                <id>build js</id>
                                <phase>none</phase>
                                <configuration>
                                    <skip>true</skip>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>

        <profile>
            <id>dev</id>
            <properties>
                <cmf.dms.classifier>dev</cmf.dms.classifier>
                <cmf.dms.npm.build.target>build</cmf.dms.npm.build.target>
            </properties>
        </profile>
        <profile>
            <id>not_eclipse</id>
            <activation>
                <property>
                    <name>!m2e.version</name>
                </property>
            </activation>
            <build>
                <plugins>
                    <!-- Это нельзя выполнять в eclipse, т.к. каталог уже добавляется как каталог с исходными текстами xtend 
                        plugin'ом. -->
                    <plugin>
                        <groupId>org.codehaus.mojo</groupId>
                        <artifactId>build-helper-maven-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>add-model-resource</id>
                                <goals>
                                    <goal>add-resource</goal>
                                </goals>
                                <configuration>
                                    <resources>
                                        <resource>
                                            <directory>${project.build.directory}/generated-sources/xtend</directory>
                                            <includes>
                                                <include>model/*.ecore</include>
                                            </includes>
                                        </resource>
                                    </resources>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>
        <profile>
            <id>npmlinkinit</id>
            <activation>
                <property>
                    <name>!skipNpmLink</name>
                </property>
                <file>
                    <missing>wc/node_modules</missing>
                </file>
            </activation>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.codehaus.mojo</groupId>
                        <artifactId>exec-maven-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>npm_install_linklocal</id>
                                <phase>process-resources</phase>
                                <goals>
                                    <goal>exec</goal>
                                </goals>
                                <configuration>
                                    <executable>npm</executable>
                                    <commandlineArgs>install linklocal@${ui.linklocal.version} --no-save
                                        ${npm.install.args}</commandlineArgs>
                                    <workingDirectory>wc</workingDirectory>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>
        <profile>
            <id>npmlink</id>
            <activation>
                <property>
                    <name>!skipNpmLink</name>
                </property>
            </activation>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.codehaus.mojo</groupId>
                        <artifactId>exec-maven-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>npm_links</id>
                                <phase>process-resources</phase>
                                <goals>
                                    <goal>exec</goal>
                                </goals>
                                <configuration>
                                    <executable>npm</executable>
                                    <commandlineArgs>run links</commandlineArgs>
                                    <workingDirectory>wc</workingDirectory>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>
    </profiles>

</project>
